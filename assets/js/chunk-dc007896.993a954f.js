(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc007896"],{"10c4":function(t,e,a){},"62da":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"product"}},[e("page-banner",{attrs:{banner:t.bannerImg,title:t.$t("product.title"),"sub-title":t.$t("product.subTitle")}}),e("div",{staticClass:"overlay",class:{active:t.sidebarVisible},on:{click:t.closeSidebar}}),e("div",{staticClass:"sidebar-container",class:{active:t.sidebarVisible}},[e("div",{staticClass:"sidebar"},[e("button",{staticClass:"close-sidebar",on:{click:t.closeSidebar}},[e("svg",{staticClass:"icon",attrs:{t:"1757925775657",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2254",width:"20",height:"20"}},[e("path",{attrs:{d:"M0 0h1024v1024H0z",fill:"#FF0033","fill-opacity":"0","p-id":"2255"}}),e("path",{attrs:{d:"M240.448 168l2.346667 2.154667 289.92 289.941333 279.253333-279.253333a42.666667 42.666667 0 0 1 62.506667 58.026666l-2.133334 2.346667-279.296 279.210667 279.274667 279.253333a42.666667 42.666667 0 0 1-58.005333 62.528l-2.346667-2.176-279.253333-279.253333-289.92 289.962666a42.666667 42.666667 0 0 1-62.506667-58.005333l2.154667-2.346667 289.941333-289.962666-289.92-289.92a42.666667 42.666667 0 0 1 57.984-62.506667z",fill:"#111111","p-id":"2256"}})])]),e("div",{staticClass:"sidebar-content"},t._l(t.categories,(function(a,s){return e("div",{key:s,staticClass:"category-item",class:{active:t.activeCategory==s},on:{click:function(e){return t.openSubcategories(s)}}},[e("div",{staticClass:"category-text"},[t._v(t._s(a.name))]),e("div",{staticClass:"category-arrow"},[e("svg",{staticClass:"icon",attrs:{t:"1757925750134",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2100",width:"20",height:"20"}},[e("path",{attrs:{d:"M373.408 200.224a32 32 0 0 0-42.816 47.552l293.664 264.256-291.84 264.256a32 32 0 0 0-4.8 42.048l2.56 3.136a32 32 0 0 0 45.184 2.24l318.112-288a32 32 0 0 0-0.064-47.488l-320-288z",fill:"#111111","p-id":"2101"}})])])])})),0)]),null!==t.activeCategory?e("div",{staticClass:"subsidebar"},[e("div",{staticClass:"subsidebar-header"},[e("span",[t._v(t._s(t.categories[t.activeCategory].name))])]),e("div",{staticClass:"subcategories-grid"},t._l(t.categories[t.activeCategory].subcategories,(function(a,s){return e("div",{key:s,staticClass:"subcategory-item",on:{click:function(e){return t.selectSubcategory(a)}}},[e("div",{staticClass:"subcategory-image"},[a.data&&a.data.image||a.image?e("img",{attrs:{src:"http://admin.doporro.com//storage/"+(a.data?a.data.image:a.image),alt:"subcategory.name"}}):t._e()]),e("div",{staticClass:"subcategory-text"},[t._v(t._s(a.name))])])})),0)]):t._e()]),e("div",{staticClass:"Allbox"},t._l(t.currentItem,(function(a,s){return e("div",{key:s},[e("p",{staticClass:"All_h11"},[t._v(t._s(a[t.currentLang]||a.title))]),e("div",{staticClass:"Allbox-inner"},t._l(a.categories,(function(a,s){return e("div",{key:s,staticClass:"Allbox-item erys",on:{click:function(e){return t.AllboxClick(a)}}},[e("img",{attrs:{src:"http://admin.doporro.com//storage/"+a.image,alt:""}}),e("div",{staticClass:"Allbox-content"},[e("p",{staticClass:"Allbox-p1"},[t._v(t._s(a[t.currentLang]||a.title))]),e("p",{staticClass:"Allbox-p2"},[t._v("more >")])])])})),0)])})),0)],1)},i=[],r=(a("0643"),a("a573"),a("688e")),o={name:"Product",components:{PageBanner:r["a"]},data(){return{bannerImg:a("aec4"),productsList:null,total:0,pageSize:6,currentPage:1,currentItem:[],isLoading:!1,productLists:[],sidebarVisible:!1,activeCategory:null,selectedSubcategory:null,categories:[],defaultCategories:[{name:"默认分类",icon:"fas fa-folder",subcategories:[]}],currentLang:"zh"}},mounted(){this.currentLang=localStorage.getItem("language").toLowerCase(),document.addEventListener("click",this.handleClickOutside),this.currentItem&&this.currentItem.length>0&&this.updateCategoriesFromCurrentItem(),this.$root.$on("languageChanged",this.handleLanguageChange)},methods:{openSidebar(){this.sidebarVisible=!0,this.activeCategory=null},closeSidebar(){this.sidebarVisible=!1,this.activeCategory=null},openSubcategories(t){this.activeCategory=t},backToCategories(){this.activeCategory=null},handleLanguageChange(){this.currentLang=localStorage.getItem("language").toLowerCase(),this.fetchFirstData(),this.activeCategory=null,this.selectedSubcategory=null},selectSubcategory(t){this.selectedSubcategory=t,this.closeSidebar(),t.data&&this.AllboxClick(t.data)},AllboxClick(t){console.log(t,"item2"),this.$router.push({name:"Products",params:{item2:t}})},handleClickOutside(t){const e=document.querySelector(".sidebar-container");!e||e.contains(t.target)||t.target.closest(".toggle-btn")||this.closeSidebar()},getListByFirstLayoutCategory(t,e){this.isLoading=!0,this.$api.products.getProductsByCategoryRoot(t.id,e).then(t=>{200==t.state_code?(this.productsList=t.data,this.total=t.total,this.isLoading=!1):(this.$notify.error({title:"请求错误",message:"产品数据请求失败！"}),this.isLoading=!1)})},getListBySecondLayoutCategory(t,e){this.isLoading=!0,this.$api.products.getProductsByCategory(t.id,e).then(t=>{200==t.state_code?(this.productsList=t.data,this.total=t.total,this.isLoading=!1):(this.$notify.error({title:"请求错误",message:"产品数据请求失败！"}),this.isLoading=!1)})},fetchFirstData(){this.isLoading=!0,this.$api.category.getCategoryByLayout().then(t=>{this.currentItem=t.data,console.log("----",t.data),this.$store.commit("setcurrentItem",t.data),console.log(this.$store.state.currentItem,"---------"),this.updateCategoriesFromCurrentItem();this.currentPage,this.pageSize})},updateCategoriesFromCurrentItem(){this.currentItem&&0!==this.currentItem.length?this.categories=this.currentItem.map(t=>({name:t[this.currentLang]||t.title,icon:"fas fa-folder",subcategories:t.categories?t.categories.map(t=>({name:t[this.currentLang]||t.title,icon:"fas fa-file",data:t})):[]})):this.categories=this.defaultCategories}},created(){this.fetchFirstData(),this.$root.$on("openProductSidebar",this.openSidebar)},beforeDestroy(){document.removeEventListener("click",this.handleClickOutside),this.$root.$off("languageChanged",this.handleLanguageChange)}},n=o,c=(a("a862"),a("2877")),l=Object(c["a"])(n,s,i,!1,null,"7539a1f0",null);e["default"]=l.exports},"688e":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"top-banner"},[e("img",{attrs:{src:t.banner,alt:""}}),e("div",{staticClass:"top-banner-content"},[e("h2",[t._v(t._s(t.title))]),e("p",[t._v(t._s(t.subTitle))])])])},i=[],r={name:"page-banner",props:{banner:{type:String,default:""},title:{type:String,default:"标题"},subTitle:{type:String,default:"副标题"}}},o=r,n=(a("f6db"),a("2877")),c=Object(n["a"])(o,s,i,!1,null,"eb219c12",null);e["a"]=c.exports},"99c6":function(t,e,a){},a862:function(t,e,a){"use strict";a("99c6")},aec4:function(t,e,a){t.exports=a.p+"assets/img/03产品分类_03.a2bba157.jpg"},f6db:function(t,e,a){"use strict";a("10c4")}}]);